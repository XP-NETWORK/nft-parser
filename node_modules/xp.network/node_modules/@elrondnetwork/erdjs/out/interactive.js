"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.chooseApiProvider = exports.chooseProxyProvider = exports.setupInteractiveWithProvider = exports.setupInteractive = void 0;
const apiProvider_1 = require("./apiProvider");
const balanceBuilder_1 = require("./balanceBuilder");
const errors_1 = require("./errors");
const networkConfig_1 = require("./networkConfig");
const proxyProvider_1 = require("./proxyProvider");
const wrapper_1 = require("./smartcontracts/wrapper");
const testutils_1 = require("./testutils");
function setupInteractive(providerChoice) {
    return __awaiter(this, void 0, void 0, function* () {
        let provider = chooseProxyProvider(providerChoice);
        return yield setupInteractiveWithProvider(provider);
    });
}
exports.setupInteractive = setupInteractive;
function setupInteractiveWithProvider(provider) {
    return __awaiter(this, void 0, void 0, function* () {
        yield networkConfig_1.NetworkConfig.getDefault().sync(provider);
        let wallets = yield testutils_1.loadAndSyncTestWallets(provider);
        let erdSys = yield wrapper_1.SystemWrapper.load(provider);
        return { erdSys, Egld: balanceBuilder_1.Egld, wallets };
    });
}
exports.setupInteractiveWithProvider = setupInteractiveWithProvider;
function chooseProxyProvider(providerChoice) {
    let providers = {
        "local-testnet": new proxyProvider_1.ProxyProvider("http://localhost:7950", { timeout: 5000 }),
        "elrond-testnet": new proxyProvider_1.ProxyProvider("https://testnet-gateway.elrond.com", { timeout: 5000 }),
        "elrond-devnet": new proxyProvider_1.ProxyProvider("https://devnet-gateway.elrond.com", { timeout: 5000 }),
        "elrond-mainnet": new proxyProvider_1.ProxyProvider("https://gateway.elrond.com", { timeout: 20000 }),
    };
    let chosenProvider = providers[providerChoice];
    if (chosenProvider) {
        return chosenProvider;
    }
    throw new errors_1.ErrInvalidArgument(`providerChoice is not recognized (must be one of: ${Object.keys(providers)})`);
}
exports.chooseProxyProvider = chooseProxyProvider;
function chooseApiProvider(providerChoice) {
    let providers = {
        "elrond-devnet": new apiProvider_1.ApiProvider("https://devnet-api.elrond.com", { timeout: 5000 }),
        "elrond-testnet": new apiProvider_1.ApiProvider("https://testnet-api.elrond.com", { timeout: 5000 }),
        "elrond-mainnet": new apiProvider_1.ApiProvider("https://api.elrond.com", { timeout: 5000 })
    };
    let chosenProvider = providers[providerChoice];
    if (chosenProvider) {
        return chosenProvider;
    }
    throw new errors_1.ErrInvalidArgument(`providerChoice is not recognized (must be one of: ${Object.keys(providers)})`);
}
exports.chooseApiProvider = chooseApiProvider;
//# sourceMappingURL=interactive.js.map