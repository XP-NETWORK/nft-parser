"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createToken = exports.InvalidTokenError = void 0;
const tokens_1 = require("./tokens");
const pair_1 = require("./pair");
class InvalidTokenError extends Error {
    constructor(message, data) {
        super(message);
        this.message = message;
        this.data = data;
        this.name = 'Invalid token error';
    }
}
exports.InvalidTokenError = InvalidTokenError;
function createToken(val, idx) {
    if (Array.isArray(val)) {
        return new pair_1.PairToken(val, idx, createToken);
    }
    const t = tokens_1.tokens.find((x) => x.prim === val.prim);
    if (!t) {
        throw new InvalidTokenError('Malformed data expected a value with a valid prim property', val);
    }
    return new t(val, idx, createToken);
}
exports.createToken = createToken;
//# sourceMappingURL=createToken.js.map